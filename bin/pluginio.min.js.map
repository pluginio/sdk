{"version":3,"file":"pluginio.min.js","sources":["../../../node_modules/tslib/tslib.es6.js","../src/core/CommandType.ts","../src/core/RemotePath.ts","../src/core/Utils.ts","../src/api/v1/Advert.ts","../src/api/ApiBuilder.ts","../src/api/v1/Camera.ts","../src/api/v1/Purchase.ts","../src/api/v1/Data.ts","../src/api/v1/Console.ts","../src/api/v1/Analytics.ts","../src/api/v1/Share.ts","../src/api/v1/User.ts","../src/api/v1/Api.ts","../src/Configuration.ts","../src/Application.ts","../../../node_modules/guid-typescript/dist/guid.js","../src/services/RegistryService.ts","../src/core/Consts.ts","../src/core/HtmlInjector.ts","../src/core/EventType.ts","../src/PluginIO.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export enum CommandType\n{\n    // core\n    ENABLE_HOST_FRAME = \"io::plugin::enable_host_frame\",\n\n    // ad\n    AD_BANNER = \"io::plugin::ad::banner\",\n    AD_IMAGE = \"io::plugin::ad::image\",\n    AD_VIDEO = \"io::plugin::ad::video\",\n    AD_VIDEO_REWARD = \"io::plugin::ad::video_reward\",\n    \n    // analytics\n    ANALYTICS_STARTUP = \"io::plugin::analytics::startup\",\n    ANALYTICS_CONTENT_VIEW = \"io::plugin::analytics::content_view\",\n    ANALYTICS_PURCHASE = \"io::plugin::analytics::purchase\",\n    ANALYTICS_ADD_TO_CART = \"io::plugin::analytics::add_to_cart\",\n    ANALYTICS_START_CHECKOUT = \"io::plugin::analytics::start_checkout\",\n    ANALYTICS_SEARCH = \"io::plugin::analytics::search\",\n    ANALYTICS_SHARE = \"io::plugin::analytics::share\",\n    ANALYTICS_RATING = \"io::plugin::analytics::rating\",\n    ANALYTICS_SIGNUP = \"io::plugin::analytics::signup\",\n    ANALYTICS_LOGIN = \"io::plugin::analytics::login\",\n    ANALYTICS_INVITE = \"io::plugin::analytics::invite\",\n    ANALYTICS_LEVEL_START = \"io::plugin::analytics::level_start\",\n    ANALYTICS_LEVEL_COMPLETE = \"io::plugin::analytics::level_complete\",\n    ANALYTICS_USER_INFO = \"io::plugin::analytics::user_info\",\n\n    // camera\n    CAMERA_OPEN = \"io::plugin::camera::open\",\n\n    // console\n    CONSOLE_LOG = \"io::plugin::console::log\",\n    CONSOLE_INFO = \"io::plugin::console::info\",\n    CONSOLE_WARN = \"io::plugin::console::warn\",\n    CONSOLE_ERROR = \"io::plugin::console::error\",\n\n    // data\n    DATA_LOAD = \"io::plugin::data::load\",\n    DATA_SAVE = \"io::plugin::data::save\",\n    \n    // purchase\n    PURCHASE_BUY = \"io::plugin::purchase::buy\",\n    PURCHASE_IS_SUBSCRIBED = \"io::plugin::purchase::is_subscribed\",\n    PURCHASE_SUBSCRIBE = \"io::plugin::purchase::subscribe\",\n    PURCHASE_STORE = \"io::plugin::purchase::store\",\n    \n    // share\n    SHARE_SOCIAL = \"io::plugin::share::social\",\n    SHARE_INVITE = \"io::plugin::share::invite\",\n\n    // upload\n    UPLOAD_VIDEO = \"io::plugin::upload::video\",\n    UPLOAD_AUDIO = \"io::plugin::upload::audio\",\n    UPLOAD_IMAGE = \"io::plugin::upload::image\",\n\n    // user\n    USER_USERNAME = \"io::plugin::user::username\",\n    USER_FRIENDS = \"io::plugin::user::friends\",\n    USER_FOLLOWERS = \"io::plugin::user::followers\",\n    USER_FOLLOWING = \"io::plugin::user::following\",\n    USER_IS_LOGGED_IN = \"io::plugin::user::is_logged_in\",\n    USER_LOGIN = \"io::plugin::user::login\"\n}","export enum RemotePath\n{\n    // core\n    RESTRICTED_CONTENT = \"/remote/static/restricted\",\n    \n    // ads\n    AD_BANNER = \"/remote/v1/ad/banner\",\n    AD_IMAGE = \"/remote/v1/ad/image\",\n    AD_VIDEO_REWARD = \"/remote/v1/ad/video-reward\",\n    AD_VIDEO = \"/remote/v1/ad/video\",\n\n    // camera\n    CAMERA = \"/remote/v1/camera/camera\",\n\n    // purchase\n    PURCHASE_BUY = \"/remote/v1/purchase/buy\",\n    PURCHASE_STORE = \"/remote/v1/purchase/store\",\n    PURCHASE_SUBSCRIBE = \"/remote/v1/purchase/buy\",\n\n    // share\n    SHARE_INVITE = \"/remote/v1/share/invite\",\n    SHARE_SOCIAL = \"/remote/v1/share/social\",\n\n    // api\n    API = \"/remote/v1/api\",\n\n    // user\n    LOGIN = \"/remote/v1/user/login\"\n}","import logo from \"../assets/logo.png\"\n// import error from \"../views/Error.html\"\n\nexport class Utils\n{\n  public static enableErrorView(element: HTMLIFrameElement): void\n  {\n    //element.ownerDocument.body.innerHTML = error;\n  }\n\n  public static enableInterstitialView(element: HTMLIFrameElement): void\n  {\n    element.style.backgroundColor = \"#000\"\n    element.style.backgroundRepeat = \"no-repeat\"\n    element.style.backgroundSize = \"120px 120px\"\n    element.style.backgroundPosition = \"center\"\n    element.style.backgroundImage = `url(${logo})`\n  }\n\n  public static disableInterstitialView(element: HTMLIFrameElement): void\n  {\n    element.style.backgroundColor = \"#fff\"\n    element.style.backgroundRepeat = \"no-repeat\"\n    element.style.backgroundSize = \"\"\n    element.style.backgroundPosition = \"auto\"\n    element.style.backgroundImage = ''\n  }\n\n  public static postMessageToApp(frameId: string, data: any, origin: string = \"*\"): void\n  {\n    if(window.self === window.top)\n    {\n      try\n      {\n        let frame: HTMLIFrameElement = document.getElementById(frameId) as HTMLIFrameElement\n        console.log(\"Targetting the iframe: \", frame.id)\n        frame.contentWindow.postMessage({...data}, origin)\n      }\n      catch(e)\n      {\n        // TODO: Handle the fact that the frameId is not matched\n        console.warn(\"frameId is invalid\")\n      }\n    }\n  }\n\n  public static postMessageToHost(data: any, origin: string = \"*\"): void\n  {\n    if(window.self !== window.top)\n    {\n      window.parent.postMessage({...data}, origin)\n    }\n  }\n}\n","import { Api } from \"./Api\";\nimport { RemotePath } from \"../../core/RemotePath\"\n\nexport class Advert {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Advert API created\");\n        this._api = api;\n    }\n\n    public showBanner(): void\n    {\n        this._api.loadHostFrame(RemotePath.AD_BANNER)\n    }\n\n    public showImage() :void\n    {\n        this._api.loadHostFrame(RemotePath.AD_IMAGE)\n    }\n\n    public showVideo(): void\n    {\n        this._api.loadHostFrame(RemotePath.AD_VIDEO)\n    }\n\n    public showVideoReward(id: string): void\n    {\n        this._api.loadHostFrame(RemotePath.AD_VIDEO_REWARD, {id})\n    }\n}\n","import { IApi } from \"./IApi\";\nimport { Api as Api_v1 } from \"./v1/Api\";\n\nexport class ApiBuilder\n{\n    public static create(type: ApiType): IApi\n    {\n        switch(type)\n        {\n            case ApiType.v1:\n                return new Api_v1();\n            default:\n                console.warn(\"An error occured: Unknow Api type: \" + type);\n                return new Api_v1();\n        }\n    }\n\n    public static createFromString(version: string): IApi\n    {\n        switch(version)\n        {\n            case \"1\":\n                return this.create(ApiType.v1);\n            default:\n                console.warn(\"An error occured: Unknow Api type: \" + version);\n                return this.create(ApiType.v1);\n        }\n    }\n}\n\nexport enum ApiType {\n    v1 = \"1\"\n}","import { Api } from \"./Api\";\nimport { RemotePath } from \"../../core/RemotePath\"\n\nexport class Camera {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Camera API created\");\n        this._api = api;\n    }\n\n    public show(): void\n    {\n        this._api.loadHostFrame(RemotePath.CAMERA)\n    }\n}","import { Api } from \"./Api\";\nimport { RemotePath } from \"../../core/RemotePath\"\nimport { CommandType } from \"../../core/CommandType\";\n\nexport class Purchase {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Purchase API created\");\n        this._api = api;\n    }\n\n    public buy(sku: string)\n    {\n        this._api.loadHostFrame(RemotePath.PURCHASE_BUY, {sku})\n    }\n\n    public isSubscribed()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.PURCHASE_IS_SUBSCRIBED)\n    }\n\n    public subscribe(id: string)\n    {\n        this._api.loadHostFrame(RemotePath.PURCHASE_SUBSCRIBE, {id})\n    }\n\n    public showStore(id: string): void\n    {\n        this._api.loadHostFrame(RemotePath.PURCHASE_STORE, {id})\n    }\n}\n","import { Api } from \"./Api\";\nimport { RemotePath } from \"../../core/RemotePath\"\nimport { CommandType } from \"../../core/CommandType\";\n\nexport class Data {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Data API created\");\n        this._api = api;\n    }\n\n    public load()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.DATA_LOAD)\n    }\n\n    public save(data: any)\n    {\n        console.warn(\"MISSING API CALL\", CommandType.DATA_SAVE, data)\n    }\n}\n","import { Api } from \"./Api\";\n\nexport class Console {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Console API created\");\n        this._api = api;\n    }\n\n    public log(command: string, value: string): void\n    {\n        console.log('%c %c %cPlugin.IO%c►%c' + command + '%c' + value + '%c ',\n            'background: #FFF; padding:5px 0px 5px 4px',\n            'background: #01B9F1; padding:5px 0px 5px 0px',\n            'background: #000; color: #FFF; padding:5px;',\n            'background: #000; color: #FFF; padding:5px 5px 5px 0px;',\n            'background: #01B9F1; padding:5px;',\n            'background: #92DCF2; padding:5px;',\n            'background: #01B9F1; padding:5px 0px 5px 0px')\n    }\n\n    public info(command: string, value: string): void\n    {\n        console.info(\n            '%c %c %cPlugin.IO%c►%c' + command + '%c' + value + '%c ',\n            'background: #FFF; padding:5px 0px 5px 4px',\n            'background: #01B9F1; padding:5px 0px 5px 0px',\n            'background: #000; color: #FFF; padding:5px;',\n            'background: #000; color: #FFF; padding:5px 5px 5px 0px;',\n            'background: #01B9F1; padding:5px;',\n            'background: #92DCF2; padding:5px;',\n            'background: #01B9F1; padding:5px 0px 5px 0px'\n        )\n    }\n\n    public warn(command: string, value: string): void\n    {\n        console.warn(\n            '%c %cPlugin.IO%c►%c' + command + '%c' + value + '%c ',\n            'background: #F6B536; padding:5px 0px 5px 0px',\n            'background: #000; color: #FFF; padding:5px;',\n            'background: #000; color: #FFF; padding:5px 5px 5px 0px;',\n            'background: #F6B536; padding:5px;',\n            'background: #FBDFAA; padding:5px;',\n            'background: #F6B536; padding:5px 0px 5px 0px'\n        )\n    }\n\n    public error(command: string, value: string): void\n    {\n        console.error(\n            '%c %cPlugin.IO%c►%c' + command + '%c' + value + '%c ',\n            'background: #FD69A5; padding:5px 0px 5px 0px',\n            'background: #000; color: #FFF; padding:5px;',\n            'background: #000; color: #FFF; padding:5px 5px 5px 0px;',\n            'background: #FD69A5; padding:5px; color:#222;',\n            'background: #FEC4DC; padding:5px;',\n            'background: #FD69A5; padding:5px 0px 5px 0px'\n        )\n    }\n}\n","import { Api } from \"./Api\";\nimport { CommandType } from \"../../core/CommandType\";\nimport { RemotePath } from \"../../core/RemotePath\";\n\nexport class Analytics {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Advert API created\");\n        this._api = api;\n    }\n\n    public startup(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_STARTUP)\n    }\n\n    public contentView(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_CONTENT_VIEW)\n    }\n\n    public purchase(id: string): void\n    {\n        this._api.loadHostFrame(RemotePath.API, {\n            data: {\n                command: CommandType.ANALYTICS_PURCHASE,\n                params: {\n                    id\n                }\n            }\n        })\n    }\n\n    public addToCart(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_ADD_TO_CART)\n    }\n\n    public startCheckout(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_START_CHECKOUT)\n    }\n\n    public search(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_SEARCH)\n    }\n\n    public share(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_SHARE)\n    }\n\n    public rating(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_RATING)\n    }\n\n    public signup(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_SIGNUP)\n    }\n\n    public login(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_LOGIN)\n    }\n\n    public invite(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_INVITE)\n    }\n\n    public levelStart(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_LEVEL_START)\n    }\n\n    public levelComplete(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_LEVEL_COMPLETE)\n    }\n\n    public userInfo(): void\n    {\n        console.warn(\"MISSING API CALL\", CommandType.ANALYTICS_USER_INFO)\n    }\n}\n","import { Api } from \"./Api\";\nimport { RemotePath } from \"../../core/RemotePath\"\n\nexport class Share {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"Share API created\");\n        this._api = api;\n    }\n\n    public social()\n    {\n        this._api.loadHostFrame(RemotePath.SHARE_SOCIAL)\n    }\n\n    public invite()\n    {\n        this._api.loadHostFrame(RemotePath.SHARE_INVITE)\n    }\n}\n","import { Api } from \"./Api\";\nimport { CommandType } from \"../../core/CommandType\";\nimport { RemotePath } from \"../../core/RemotePath\";\n\nexport class User {\n    private _api: Api;\n\n    constructor(api: Api)\n    {\n        console.log(\"User API created\");\n        this._api = api;\n    }\n\n    public username()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.USER_USERNAME)\n    }\n\n    public friends()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.USER_FRIENDS)\n    }\n\n    public followers()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.USER_FOLLOWERS)\n    }\n\n    public following()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.USER_FOLLOWING)\n    }\n\n    public isLoggedIn()\n    {\n        console.warn(\"MISSING API CALL\", CommandType.USER_IS_LOGGED_IN)\n    }\n\n    public login()\n    {\n        this._api.loadHostFrame(RemotePath.LOGIN)\n    }\n}\n","import { Application } from \"../../Application\";\nimport { Utils } from \"../../core/Utils\";\nimport { IApi } from \"../IApi\";\nimport { CommandType } from \"../../core/CommandType\"\nimport { Advert } from \"./Advert\"\nimport { Camera } from \"./Camera\";\nimport { Purchase } from \"./Purchase\";\nimport { Data } from \"./Data\";\nimport { Console } from \"./Console\";\nimport { Analytics } from \"./Analytics\";\nimport { Share } from \"./Share\";\nimport { User } from \"./User\";\n\nexport class Api implements IApi {\n    public static VERSION: string = \"1\"\n    // internal\n    public application: Application\n\n    private _advert: Advert\n    private _analytics: Analytics\n    private _camera: Camera\n    private _console: Console\n    private _data: Data\n    private _purchase: Purchase\n    private _share: Share\n    private _user: User\n\n    public loadHostFrame(path: string, params: object = {}): void\n    {\n        Utils.postMessageToHost({\n            \"__frameId\": this.application.frameId,\n            \"__namespace\": this.application.namespace,\n            \"__command\": CommandType.ENABLE_HOST_FRAME,\n            \"path\": path,\n            ...params\n        })\n    }\n\n    public init(): void\n    {\n        this._advert = new Advert(this.application.api)\n        this._analytics = new Analytics(this.application.api)\n        this._camera = new Camera(this.application.api)\n        this._console = new Console(this.application.api)\n        this._data = new Data(this.application.api)\n        this._purchase = new Purchase(this.application.api)\n        this._share = new Share(this.application.api)\n        this._user = new User(this.application.api)\n    }\n\n    public get advert(): Advert\n    {\n        return this._advert\n    }\n\n    public get analytics(): Analytics\n    {\n        return this._analytics\n    }\n\n    public get camera(): Camera\n    {\n        return this._camera\n    }\n\n    public get console(): Console\n    {\n        return this._console\n    }\n\n    public get data(): Data\n    {\n        return this._data\n    }\n\n    public get purchase(): Purchase\n    {\n        return this._purchase\n    }\n\n    public get share(): Share\n    {\n        return this._share\n    }\n\n    public get user(): User\n    {\n        return this._user\n    }\n\n    startup()\n    {\n        console.log(\"TODO: starting up .......\")\n    }\n}\n","export class Configuration {\n    // any type is fine here as we recieve a JS object - consider proxy\n    private _data: any\n\n    public constructor(config: any) {\n        this._data = config\n    }\n\n    public getString(name: string): string {\n        return this._data[name] as string\n    }\n\n    public getNumber(name: string): number {\n        return this._data[name] as number\n    }\n\n    public getBoolean(name: string): boolean {\n        return this._data[name] as boolean\n    }\n\n    public getHtmlElement(name: string): HTMLElement {\n        return this._data[name] as HTMLElement\n    }\n}\n","import { ApiBuilder } from \"./api/ApiBuilder\";\nimport { Api } from \"./api/v1/Api\";\nimport { CommandType } from \"./core/CommandType\";\nimport { Configuration } from \"./Configuration\";\nimport { EventType } from \"./PluginIO\";\nimport { RemotePath } from \"./core/RemotePath\";\n\nexport class Application {\n    private static _callbackMap: Map<string, (_:any) => any> = new Map<string, (_:any) => any>()\n\n    private _isInitialized = false;\n    private _api: Api\n    private _config: Configuration;\n\n    private _sdk: string;\n    private _namespace: string;\n    private _frameId: string\n\n    public constructor()\n    {\n        if(window.self !== window.top)\n        {\n            // setup the application\n            console.log(\"WINDOW ID IS: \", window.name)\n\n            let config: any = decodeURIComponent(window.location.href.split(\"config=\")[1])\n            let json: any = JSON.parse(config)\n            console.log(\"Data: \", window.location.href.split(\"config=\")[1])\n            console.log(json)\n            this._sdk = json.__sdk;\n            this._namespace = json.__namespace;\n            this._frameId = json.__frameId;\n            this._config = new Configuration(json.__params);\n            \n            this.init();\n            \n            window.addEventListener(\"message\", (e: MessageEvent) => {\n                switch(e.data.__command)\n                {\n                    // ad\n                    case EventType.AD_BANNER_RESPONSE:\n                    case EventType.AD_IMAGE_RESPONSE:\n                    case EventType.AD_VIDEO_RESPONSE:\n                    case EventType.AD_VIDEO_REWARD_RESPONSE:\n                    // camera\n                    case EventType.CAMERA_RESPONSE:\n                    // data\n                    case EventType.DATA_LOAD_RESPONSE:\n                    case EventType.DATA_SAVE_RESPONSE:\n                    // purchase\n                    case EventType.PURCHASE_BUY_RESPONSE:\n                    case EventType.PURCHASE_IS_SUBSCRIBED_RESPONSE:\n                    case EventType.PURCHASE_SUBSCRIBE_RESPONSE:\n                    case EventType.PURCHASE_STORE_RESPONSE:\n                    // share\n                    case EventType.SHARE_SOCIAL_RESPONSE:\n                    case EventType.SHARE_INVITE_RESPONSE:\n                    // user\n                    case EventType.USER_USERNAME_RESPONSE:\n                    case EventType.USER_FRIENDS_RESPONSE:\n                    case EventType.USER_FOLLOWERS_RESPONSE:\n                    case EventType.USER_FOLLOWING_RESPONSE:\n                    case EventType.USER_IS_LOGGED_IN_RESPONSE:\n                    case EventType.USER_LOGIN_RESPONSE:\n                        if(Application._callbackMap.has(e.data.__command))\n                        {\n                            Application._callbackMap.get(e.data.__command)(e)\n                        }\n                        break\n                    default:\n                        console.warn(\"Unknown command type: \" + e.data.__command)\n                }\n            })\n        }\n    }\n\n    public addEventListener(type: string, callback: (_:any) => any) {\n        console.log(\"Registering callback: \", type)\n        Application._callbackMap.set(type, callback)\n    }\n\n    private init()\n    {\n        if(!this._isInitialized)\n        {\n            this._api = ApiBuilder.createFromString(this.sdk) as Api\n            this._api.application = this\n            this._api.init()\n\n            this._isInitialized = true\n        }\n    }\n\n    public showRestrictedContent()\n    {\n        this._api.loadHostFrame(RemotePath.RESTRICTED_CONTENT)\n    }\n\n    public showLoader()\n    {\n        console.log(\"**** SHOWING THE LOADER ****\")\n    }\n\n    public hideLoader()\n    {\n        console.log(\"**** HIDING THE LOADER ****\")\n    }\n\n    public get frameId(): string\n    {\n        return this._frameId\n    }\n\n    public get sdk(): string\n    {\n        return this._sdk\n    }\n\n    public get namespace(): string\n    {\n        return this._namespace\n    }\n\n    public get api(): Api\n    {\n        return this._api\n    }\n\n    public get config(): Configuration\n    {\n        return this._config\n    }\n}\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar Guid = /** @class */ (function () {\r\n    function Guid(guid) {\r\n        if (!guid) {\r\n            throw new TypeError(\"Invalid argument; `value` has no value.\");\r\n        }\r\n        this.value = Guid.EMPTY;\r\n        if (guid && Guid.isGuid(guid)) {\r\n            this.value = guid;\r\n        }\r\n    }\r\n    Guid.isGuid = function (guid) {\r\n        var value = guid.toString();\r\n        return guid && (guid instanceof Guid || Guid.validator.test(value));\r\n    };\r\n    Guid.create = function () {\r\n        return new Guid([Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\"));\r\n    };\r\n    Guid.createEmpty = function () {\r\n        return new Guid(\"emptyguid\");\r\n    };\r\n    Guid.parse = function (guid) {\r\n        return new Guid(guid);\r\n    };\r\n    Guid.raw = function () {\r\n        return [Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\");\r\n    };\r\n    Guid.gen = function (count) {\r\n        var out = \"\";\r\n        for (var i = 0; i < count; i++) {\r\n            // tslint:disable-next-line:no-bitwise\r\n            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return out;\r\n    };\r\n    Guid.prototype.equals = function (other) {\r\n        // Comparing string `value` against provided `guid` will auto-call\r\n        // toString on `guid` for comparison\r\n        return Guid.isGuid(other) && this.value === other.toString();\r\n    };\r\n    Guid.prototype.isEmpty = function () {\r\n        return this.value === Guid.EMPTY;\r\n    };\r\n    Guid.prototype.toString = function () {\r\n        return this.value;\r\n    };\r\n    Guid.prototype.toJSON = function () {\r\n        return {\r\n            value: this.value\r\n        };\r\n    };\r\n    Guid.validator = new RegExp(\"^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$\", \"i\");\r\n    Guid.EMPTY = \"00000000-0000-0000-0000-000000000000\";\r\n    return Guid;\r\n}());\r\nexports.Guid = Guid;\r\n","import { Guid } from \"guid-typescript\"\nimport { CommandType } from \"../core/CommandType\"\nimport { Utils } from \"../core/Utils\"\n\n/*\nclass PluginParam {\n    public name: string\n    public value: string\n  \n    constructor(name: string, value: string)\n    {\n      this.name = name\n      this.value = value\n    }\n}\n*/\n\nclass PluginProxy {\n    private _element: HTMLElement\n    private _namespace: string\n    private _version: string\n    private _params: any = {}\n    private _appPath: string = \"\"\n  \n    public constructor(element: HTMLElement, namespace: string, version: string)\n    {\n      this._element = element\n      this._namespace = namespace\n      this._version = version\n    }\n  \n    public get appPath(): string \n    {\n      return this._appPath\n    }\n  \n    public set appPath(path: string)\n    {\n      this._appPath = path\n    }\n  \n    public get element(): HTMLElement\n    {\n      return this._element\n    }\n  \n    public get namespace(): string\n    {\n      return this._namespace\n    }\n  \n    public get version(): string\n    {\n      return this._version\n    }\n  \n    public get params(): any\n    {\n      return this._params\n    }\n}\n\nexport class RegistryService\n{\n    private static _instance: RegistryService\n    private _elementList: PluginProxy[] = []\n\n    public static get instance(): RegistryService\n    {\n        if(!this._instance)\n        {\n            this._instance = new RegistryService()\n        }\n        return this._instance\n    }\n\n    constructor()\n    {\n      if(window.self === window.top)\n      {\n        window.addEventListener('load', (e: Event) => {\n            this.parse()\n        })\n      }\n    }\n\n    public parse()\n    {\n      console.log(\"Parsing started\")\n      let collection: HTMLCollectionOf<Element> = document.getElementsByTagName(\"plugin\")\n\n      console.log(\"Number of plugins: \" + collection.length)\n      this._elementList = []\n      for (let i = 0; i < collection.length; ++i)\n      {\n        const element: HTMLElement = collection[i] as HTMLElement\n        const namespace: string | null = element.getAttribute(\"namespace\")\n        const version: string | null = element.getAttribute(\"version\")\n\n        if (!element)\n        {\n            console.warn(\"element is undefined\")\n            continue\n        }\n\n        if (!namespace)\n        {\n            console.warn(\"namespace is undefined\")\n            continue\n        }\n\n        if (!version)\n        {\n            console.warn(\"version is undefined\")\n            continue\n        }\n\n        const proxy: PluginProxy = new PluginProxy(element, namespace, version)\n        this._elementList.push(proxy)\n\n        this.parseParams(proxy)\n        //this.requestPlugin(proxy)\n        this.onAppLoaded(new Event(\"\"), proxy)\n      }\n    }\n\n    private parseParams(proxy: PluginProxy): void\n    {\n        for (let i = 0; i < proxy.element.children.length; ++i) {\n          let child: HTMLElement = proxy.element.children[i] as HTMLElement\n          let tagName: string = child.tagName.toLowerCase()\n    \n          console.log(\"Tagname: \" + tagName)\n          let name: string | null = child.getAttribute(\"name\")\n          let value: string | null = child.getAttribute(\"value\")\n    \n          if (!name)\n          {\n            console.warn(\"name is undefined\")\n            continue\n          }\n    \n          if (!value)\n          {\n            console.warn(\"value is undefined\")\n            continue\n          }\n    \n          console.log(\"Name: \" + name, \"Value: \" + value)\n          //const param: PluginParam = new PluginParam(name, value)\n          proxy.params[name] = value\n        }\n    }\n\n    private onAppLoaded(e: Event, proxy: PluginProxy): void\n    {\n      console.log(\"App is loaded\")\n  \n      let frameId: string = Guid.create().toString()\n  \n      const iframe: HTMLIFrameElement = document.createElement(\"iframe\")\n      //iframe.setAttribute('allow', '')\n      iframe.width = \"100%\"\n      iframe.height = \"100%\"\n      iframe.id = frameId\n      iframe.title = \"Loop Radio App\" // TODO: Get title and SDK version from the registry\n      Utils.enableInterstitialView(iframe)\n      \n      proxy.element.appendChild(iframe);\n\n      let json = JSON.stringify({\n        __namespace: proxy.namespace,\n        __version: proxy.version,\n        __params: proxy.params,\n        __sdk: \"1\",\n        __frameId: frameId,\n      })\n      \n      let config = encodeURIComponent(json)\n      \n      iframe.src = window.location.hostname + \":3003?config=\" + config\n    }\n}\n","export enum Consts\n{\n    HOST_IFRAME_ID = \"io::plugin::iframe\"\n}","import { Consts } from \"./Consts\"\nimport { Utils } from \"./Utils\"\n\nexport class HtmlInjector\n{\n    public static injectHostIframe(): HTMLIFrameElement\n    {\n        let iframe = document.createElement('iframe')\n        iframe.id = Consts.HOST_IFRAME_ID\n        iframe.style.height = \"100%\"\n        iframe.style.width = \"100%\"\n        iframe.style.border = \"0px\"\n        iframe.style.backgroundColor = \"#000\"\n        iframe.style.zIndex = \"9999\"\n        iframe.style.position = \"fixed\"\n        iframe.style.top = \"0px\"\n        iframe.style.left = \"0px\"\n        iframe.style.display = \"none\"\n        iframe['allowTransparency'] = \"true\"\n\n        iframe.addEventListener(\"load\", () => {\n            Utils.disableInterstitialView(iframe)\n        })\n\n        document.body.appendChild(iframe)\n        return iframe;\n    }\n}\n","export enum EventType {\n    // core\n    CLOSE_HOST_FRAME = \"io::plugin::close_host_frame\",\n\n    // misc\n    CAMERA_RESPONSE = \"io::plugin::camera::response\",\n    UPLOAD_RESPONSE = \"io::plugin::upload::response\",\n\n    // ad\n    AD_VIDEO_RESPONSE = \"io::plugin::ad::video::response\",\n    AD_VIDEO_REWARD_RESPONSE = \"io::plugin::ad::video_reward::response\",\n    AD_IMAGE_RESPONSE = \"io::plugin::ad::image::response\",\n    AD_BANNER_RESPONSE = \"io::plugin::ad::banner::response\",\n\n    // data\n    DATA_LOAD_RESPONSE = \"io::plugin::data::load::response\",\n    DATA_SAVE_RESPONSE = \"io::plugin::data::save::response\",\n\n    // share\n    SHARE_SOCIAL_RESPONSE = \"io::plugin::share::social::response\",\n    SHARE_INVITE_RESPONSE = \"io::plugin::share::invite::response\",\n\n    // user\n    USER_USERNAME_RESPONSE = \"io::plugin::user::username::response\",\n    USER_FRIENDS_RESPONSE = \"io::plugin::user::friends::response\",\n    USER_FOLLOWERS_RESPONSE = \"io::plugin::user::followers::response\",\n    USER_FOLLOWING_RESPONSE = \"io::plugin::user::following::response\",\n    USER_IS_LOGGED_IN_RESPONSE = \"io::plugin::user::is_logged_in::response\",\n    USER_LOGIN_RESPONSE = \"io::plugin::user::login::response\",\n\n    // purchase\n    PURCHASE_BUY_RESPONSE = \"io::plugin::purchase::buy::response\",\n    PURCHASE_IS_SUBSCRIBED_RESPONSE = \"io::plugin::purchase::is_suscribed::response\",\n    PURCHASE_SUBSCRIBE_RESPONSE = \"io::plugin::purchase::subscribe::response\",\n    PURCHASE_STORE_RESPONSE = \"io::plugin::purchase::store::response\",\n\n    // static\n    // STATIC_RESTRICTED_CONTENT = \"io::plugin::static::restricted::re\"\n}\n","import { Application } from \"./Application\";\nimport { Api } from \"./api/v1/Api\";\nimport { IApi } from \"./api/IApi\";\nimport { RegistryService } from \"./services/RegistryService\";\nimport { HtmlInjector } from \"./core/HtmlInjector\";\nimport { Consts } from './core/Consts'\nimport { Utils } from \"./core/Utils\";\nimport { CommandType } from \"./core/CommandType\";\nimport { EventType } from \"./core/EventType\";\n\nexport { Consts, Application, Api, IApi, CommandType, EventType, Utils }\n\nexport default class PluginIO\n{\n    public static hostFrame: HTMLIFrameElement;\n    private static _registryService: RegistryService;\n    private static _lastFrameId: string;\n    \n    public static init(): void\n    {\n        if(!this._registryService)\n        {\n            console.log(\"Initializing Plugin.IO registry service\")\n            this._registryService = RegistryService.instance\n        }\n\n        // apply settings to the host\n        if(window.self === window.top)\n        {\n            PluginIO.hostFrame = HtmlInjector.injectHostIframe()\n\n            window.addEventListener('message', (e: MessageEvent) => {\n                if(e.data?.__command?.includes('io::plugin'))\n                {\n                    switch(e.data.__command)\n                    {\n                        case CommandType.ENABLE_HOST_FRAME:\n\n                            // we url encode the config\n                            let params = encodeURIComponent(JSON.stringify(e.data))\n                            if(e.data?.data?.command)\n                            {\n                                this.enableHostFrame(e.data.path + \"/\" + params)\n                            }\n                            else\n                            {\n                                this.enableHostFrame(e.data.path)\n                            }\n                            this._lastFrameId = e.data.__frameId\n                            console.log(\"FrameId: \", this._lastFrameId)\n                            console.log(\"Path: \", e.data.path)\n                            \n                            break\n                        case EventType.CLOSE_HOST_FRAME:\n                            this.disableHostFrame();\n                            break\n\n                        // forward responses to the designated app\n                        // ad\n                        case EventType.AD_BANNER_RESPONSE:\n                        case EventType.AD_IMAGE_RESPONSE:\n                        case EventType.AD_VIDEO_RESPONSE:\n                        case EventType.AD_VIDEO_REWARD_RESPONSE:\n                        // camera\n                        case EventType.CAMERA_RESPONSE:\n                        // data\n                        case EventType.DATA_LOAD_RESPONSE:\n                        case EventType.DATA_SAVE_RESPONSE:\n                        // purchase\n                        case EventType.PURCHASE_BUY_RESPONSE:\n                        case EventType.PURCHASE_IS_SUBSCRIBED_RESPONSE:\n                        case EventType.PURCHASE_SUBSCRIBE_RESPONSE:\n                        case EventType.PURCHASE_STORE_RESPONSE:\n                        // share\n                        case EventType.SHARE_INVITE_RESPONSE:\n                        case EventType.SHARE_SOCIAL_RESPONSE:\n                        // user\n                        case EventType.USER_USERNAME_RESPONSE:\n                        case EventType.USER_FRIENDS_RESPONSE:\n                        case EventType.USER_FOLLOWERS_RESPONSE:\n                        case EventType.USER_FOLLOWING_RESPONSE:\n                        case EventType.USER_IS_LOGGED_IN_RESPONSE:\n                        case EventType.USER_LOGIN_RESPONSE:\n                            this.disableHostFrame()\n                            Utils.postMessageToApp(this._lastFrameId, {...e.data}, \"*\")\n                            break\n                        default:\n                            console.warn(\"Unknown command type: \" + e.data.__command)\n                    }\n                }\n            })\n        }\n    }\n\n    public static enableHostFrame(path: string): void\n    {\n        if(window.self === window.top) {\n            let iframe: HTMLIFrameElement = document.getElementById(Consts.HOST_IFRAME_ID) as HTMLIFrameElement\n            Utils.enableInterstitialView(iframe)\n            iframe.style.display = 'inline'\n            iframe.setAttribute('src', path)\n        }\n    }\n\n    public static disableHostFrame(): void\n    {\n        let iframe: HTMLIFrameElement;\n\n        if(window.self === window.top) {\n            iframe = document.getElementById(Consts.HOST_IFRAME_ID) as HTMLIFrameElement\n        }\n        else\n        {\n            iframe = parent.document.getElementById(Consts.HOST_IFRAME_ID) as HTMLIFrameElement\n        }\n\n        Utils.disableInterstitialView(iframe)\n        iframe.style.display = 'none'\n        iframe.setAttribute('src', '')\n    }\n}\n"],"names":["CommandType","RemotePath","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","Utils","element","style","backgroundColor","backgroundRepeat","backgroundSize","backgroundPosition","backgroundImage","frameId","data","origin","window","self","top","frame","document","getElementById","console","log","id","contentWindow","postMessage","e","warn","parent","ApiType","api","_api","Advert","loadHostFrame","AD_BANNER","AD_IMAGE","AD_VIDEO","AD_VIDEO_REWARD","Camera","CAMERA","Purchase","sku","PURCHASE_BUY","PURCHASE_IS_SUBSCRIBED","PURCHASE_SUBSCRIBE","PURCHASE_STORE","Data","DATA_LOAD","DATA_SAVE","Console","command","value","info","error","Analytics","ANALYTICS_STARTUP","ANALYTICS_CONTENT_VIEW","API","ANALYTICS_PURCHASE","params","ANALYTICS_ADD_TO_CART","ANALYTICS_START_CHECKOUT","ANALYTICS_SEARCH","ANALYTICS_SHARE","ANALYTICS_RATING","ANALYTICS_SIGNUP","ANALYTICS_LOGIN","ANALYTICS_INVITE","ANALYTICS_LEVEL_START","ANALYTICS_LEVEL_COMPLETE","ANALYTICS_USER_INFO","Share","SHARE_SOCIAL","SHARE_INVITE","User","USER_USERNAME","USER_FRIENDS","USER_FOLLOWERS","USER_FOLLOWING","USER_IS_LOGGED_IN","LOGIN","Api","path","postMessageToHost","__frameId","application","__namespace","namespace","__command","ENABLE_HOST_FRAME","_advert","_analytics","_camera","_console","_data","_purchase","_share","_user","ApiBuilder","type","v1","Api_v1","version","create","config","Configuration","name","decodeURIComponent","location","href","split","json","JSON","parse","_sdk","__sdk","_namespace","_frameId","_config","__params","init","addEventListener","EventType","AD_BANNER_RESPONSE","AD_IMAGE_RESPONSE","AD_VIDEO_RESPONSE","AD_VIDEO_REWARD_RESPONSE","CAMERA_RESPONSE","DATA_LOAD_RESPONSE","DATA_SAVE_RESPONSE","PURCHASE_BUY_RESPONSE","PURCHASE_IS_SUBSCRIBED_RESPONSE","PURCHASE_SUBSCRIBE_RESPONSE","PURCHASE_STORE_RESPONSE","SHARE_SOCIAL_RESPONSE","SHARE_INVITE_RESPONSE","USER_USERNAME_RESPONSE","USER_FRIENDS_RESPONSE","USER_FOLLOWERS_RESPONSE","USER_FOLLOWING_RESPONSE","USER_IS_LOGGED_IN_RESPONSE","USER_LOGIN_RESPONSE","Application","_callbackMap","has","get","callback","set","_isInitialized","createFromString","sdk","RESTRICTED_CONTENT","Map","Guid","guid","TypeError","EMPTY","isGuid","toString","validator","test","gen","join","createEmpty","raw","count","out","Math","random","substring","equals","other","isEmpty","toJSON","RegExp","_element","_version","PluginProxy","_appPath","_params","_this","RegistryService","_instance","collection","getElementsByTagName","_elementList","getAttribute","proxy","push","parseParams","onAppLoaded","Event","children","child","tagName","toLowerCase","name_1","iframe","createElement","width","height","title","enableInterstitialView","appendChild","stringify","__version","encodeURIComponent","src","hostname","Consts","HtmlInjector","HOST_IFRAME_ID","border","zIndex","position","left","display","disableInterstitialView","body","PluginIO","_registryService","instance","hostFrame","injectHostIframe","includes","enableHostFrame","_lastFrameId","CLOSE_HOST_FRAME","disableHostFrame","postMessageToApp","setAttribute"],"mappings":"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"}